{% extends "base.html" %}
{% load static %}

{% block content %}
  <div class="container">


<h2>{{title}}</h2>


<ul>

{% for todo in todo_logs %}
    <li>
      <form action="/update_todo_log/{{todo.instance.unique_id}}" method="post" style="display: inline;">
        {% csrf_token %}
        {{ todo.completion }}
        <span style="font-weight:bold;">{{ todo.description }}</span> - ({{ todo.duration }}m) %{{ todo.tag }} 
        <span style="display: none;">{{ todo.date }}</span>
        
        <input type="submit" value="Update">
      </form>
      <form action="/delete_todo_log/{{todo.instance.unique_id}}" method="POST" style="display: inline;">
        {% csrf_token %}
        <input type="submit" value="Delete">
      </form>
    </li>
{% endfor %}

</ul>

{% if streak >= 2 %}
<h4>Streak: {{streak}} days !</h4>
{% else %}
<h4>Streak: {{streak}} days</h4>
{% endif %}

<form action="/new_todo_log/" method="post">
  {% csrf_token %}
  {{ form }}
  <input type="submit" value="Submit">
</form>

<h3>
Stats:
</h3>
<div>
    <span style="font-weight:bold;">This day's time:</span> {{completed_time.0}}hr{{completed_time.1}}m
</div>
<div>
    <span style="font-weight:bold;">This week's time:</span> {{completed_week_time.0}}hr{{completed_week_time.1}}m
</div>
<div>
    <span style="font-weight:bold;">Total time:</span> {{total_time.0}}hr{{total_time.1}}m
</div>

<h3>
  Todays Tags:
</h3>
<ul>
  {% for tag in completed_tags %}
  <li>{{tag}}</li>
  {% endfor %}
</ul>
<h3>
  Week Tags:
</h3>
<ul>
  {% for tag in week_tags %}
  <li>{{tag.1}} {{tag.0}}(s) </li>
  {% endfor %}
</ul>
<h3>
  All Tags:
</h3>
<ul>
  {% for tag in all_tags %}
  <li>{{tag.1}} {{tag.0}}(s) </li>
  {% endfor %}
</ul>



</div>

{% endblock %}
